
<div class="kiiri-dropdown {{ type }}" ng-click="toggleDropdown()" clickoutside on-click-outside="closeDropdown" is-enabled="dropdownOpen" ng-class="{ empty: (items.length === 0), disabled: disabled, open: dropdownOpen, fill: fill }" ng-mouseleave="openOnHover && closeDropdown()" tabindex="0" ng-keydown="tabIndexKeyDown($event)">
    <table ng-class="{ open: dropdownOpen }">
        <tr><td>
            <div class="kiiri-dropdown-current-item" ng-style="{'background-image': (icon && 'url('+icon+')')}" ng-class="{ 'has-icon': icon, 'has-kiiri-icon': kiiriIcon, empty: (items.length === 0), disabled: disabled }" ng-mouseout="dropdownHover = false" ng-mouseover="(dropdownHover = true) && openOnHover && openDropdown()" ng-if="!inputFilter">
                <img ng-hide="!imageIcon" ng-src="{{imageIcon}}"></img>
                <icon ng-hide="!kiiriIcon" class="{{kiiriIcon}}" ng-class="{ 'icon-primary': (dropdownHover || dropdownOpen) }"></icon>
                {{ itemDisplay(selectedItem) || (items.length === 0 && emptyText) || defaultText }}
                <icon class="kiiri-dropdown-current-item-arrow arrow-down" ng-class="{ 'icon-primary': (dropdownHover || dropdownOpen), 'arrow-up': dropdownOpen }"></icon>
            </div>
            <input-field ng-if="inputFilter" value="fields.filterValue" fill="true" placeholder="{{ defaultText }}"></input-field>
        </td></tr>
        <tr ng-click="$event.stopPropagation()" ng-class="{ 'clear-cursor': !dropdownOpen }"><td>
            <div class="kiiri-dropdown-items" ng-class="{ visible: dropdownOpen }" scrollbar ng-style="{ 'max-height': (menuHeight + 'px')}">
                <a ng-repeat="item in linkItems track by $index" ng-href="{{item.href}}"><div class="kiiri-dropdown-item" ng-class="{ 'has-icon': icon, 'has-kiiri-icon': kiiriIcon }">{{item.text}}</div></a>
                <div class="kiiri-dropdown-item" ng-repeat="item in dropdownItems() track by $index" ng-class="{ 'has-icon': icon, 'has-kiiri-icon': kiiriIcon, 'tab-index-selected': currentTabSelectedIndex === $index }" ng-click="selectItem(item); $event.stopPropagation()" ng-hide="hideSelected && selectedItem === item">
                    <dropdown-item item="item"> {{itemDisplay(item)}} </dropdown-item>
                </div>
            </div>
        </td></tr>
    </table>
    <input ng-if="formName" name="{{formName}}" value="{{ itemValue(selectedItem) }}"></input>
</div>